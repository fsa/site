# Вопросы-ответы по IPv6

Ваш интернет работает без сбоев, и вы думаете: «IPv4 меня полностью устраивает, зачем этот IPv6?» Логично, ведь всё и так работает. Но есть одна загвоздка. Адресов IPv4-адреса довольно мало, особенно если учесть на сколько вырос интернет за последние десятилетия. Провайдеры вынуждены использовать дополнительно оборудование (например, CGNAT), чтобы дать доступ в сеть IPv4 всем пользователя. Адреса, как дефицитный товар, перепродаются и увеличивается стоимость их аренды. Например уже сейчас чтобы получить полноценный доступ в интернет по IPv4 провайдеры в РФ просят от 20 до 150 рублей в месяц за «белый» IPv4 адрес. Это означает, что вы не будете делить этот адрес с другими пользователями, а также не будете использовать дополнительное оборудование провайдера, которое может заметно ухудшить качество доступа (скорость скачивания и «пинг»). Сети 5G, спутниковый интернет требуют ещё большего количества адресов, без расширения адресного пространства невозможно разворачивать такие сети. Можно подумать, что это катастрофа! Но, на самом деле нет. Инженеры уже давно озаботились проблемой нехватки IPv4, ещё тогда, когда этой проблемы не было, но расчёты показывали, что с этой проблемой мы столкнёмся в ближайшие годы. В результате появился протокол, сейчас известный как IPv6. Он решает проблему нехватки адресов, которых теперь хватит на все ваши гаджеты, от умных лампочек до роботов-пылесосов. В этой статье я простыми словами объясню, почему IPv6 — это не сложная ерунда, а наш шанс сделать интернет быстрее, дешевле и готовым к будущему. Готовы узнать, что вы теряете, оставаясь с IPv4?

## Зачем был создан новый протокол IPv6?

В первую очередь, новый протокол призван решить основную проблему IPv4 — острую нехватку адресного пространства.

## Почему инженеры просто не расширили адресное пространство IPv4? Зачем было делать новый протокол?

Заголовок пакетов IPv4 имеет чёткую структуру. В нём просто не оказалось места для дополнительных бит адреса, любое изменение заголовка пакеты вызывает несовместимость со старым протоколом и требует обновление программного обеспечения на всём парке устройств. Так разработчики пришли к выводу, что совместимостью со старым протоколом IPv4 придётся пожертвовать. Но если ломается совместимость, то почему бы попутно не сделать протокол максимально эффективным и учесть все ошибки, которые были выявлены при эксплуатации старого протокола.

## Почему новый протокол имеет версию №6, а не №5, например?

Всё дело в заголовке IP пакета. И IPv4 и IPv6 имеют в своей структуре поле «версия». №5 был занят и за протоколом закрепили следующую свободную версию — №6.

## IPv6 не очень популярен, я лучше подожду когда разработают IPv7 или IPv9

На самом деле подобные разработки уже велись. Например, протокол TUBA, где адрес вообще может быть переменной длины. Но даже сами авторы выражали сомнения в том, что протокол будет достаточно эффективным. Если бы разработку признали перспективной, то сейчас говорили бы о переходе на IPv9. Но сейчас речь идёт именно о протоколе IPv6, который доказал свою эффективность.

Полный список зарезервированных версий IP представлен [на сайте IANA](https://www.iana.org/assignments/version-numbers/version-numbers.xhtml).

## Да у меня есть куча устройств, которые не умеют использовать ничего, кроме IPv4

Использование протокола IPv6 не означает обязательного полного отказа от IPv4. Вы можете использовать оба протокола IPv4 и IPv6 одновременно (дуалстэк). Более того, существуют технологии, которые позволят вам организовывать островок IPv4 даже если вся ваша сеть или сеть вашего провайдера работает исключительно на IPv6. Ваш провайдер может иметь сеть исключительно на IPv6, но предоставлять вам доступ в сеть IPv4 через специальные шлюзы NAT64, которые по своему принципу работы похожи на используемые сейчас CGNAT. При этом ваша домашняя сеть при правильной настройке маршрутизатора может иметь по прежнему «серую» адресацию IPv4, такую же, какую вы используете сейчас, а также предоставлять доступ в сеть IPv6 без каких либо посредников. Таким образом ваши IPv4-устройства — принтеры, лампочки, пылесосы —  могут продолжать работать как и раньше.

## NAT защищает, а в IPv6 ты голой жопой в интернет
