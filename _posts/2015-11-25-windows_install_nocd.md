---
layout: post
title: Как я ставил Windows без DVD/CD, флешки и сети
date: 2015-11-25 15:17:00 +0500
tags: [Windows, Linux, VirtualBox]
---
Возникла тут задача установить Windows на компьютер без DVD/CD.

Первая мысль была установить с флешки. День колдовал с флешкой, ничего не грузится. Даже Ubuntu пробовал. Загружается. А Windows установочный никак. Кстати, позже проверил флешку на другом ПК, там всё загрузилось.

Вторая мысль - загрузиться по сети и установить. наличие настроенного сервера делало эту задачу, вроде бы, легко выполнимой. Но нет. Облегчённая версия Windows успешно грузилась по сети и в тот момент когда можно было бы подключать сетевой диск с дистрибутивом сетевая карта неожиданно умирала. Точнее пропадал линк и Windows PE уходила в вечное ожидание сети.

И тут в голову неожиданно пришла идея поставить систему в виртуальной машине... БРЕД? Нет. Всё сработало!.

Что нам необходимо для установки:

* VirtualBox;
* Образ системы на диске или в файле ISO (ну или любой другой формат, которые съест VirtualBox);
* Контейнер для HDD или, на крайний случай, место в системнике для подключения второго винта на который будет ставиться система.

Приступаем к установке.

Для начала выясним как обзывается мой второй HDD. На Linux сделать это проще простого. Подключаю внешний диск и смотрю что появилось в `/dev` - у меня это `/dev/sdb`. Отлично. Создаю в удобном месте файл `sdb.vmdk`:

```bash
VBoxManage internalcommands createrawvmdk -filename sdb.vmdk -rawdisk /dev/sdb
```

Виртуальный образ, а точнее ссылка на реальный HDD, для VirtualBox создан. Остаётся создать новую машинку, использовать в качестве HDD созданный образ и подключить желаемый ISO-образ с дистрибутивом в качестве CD/DVD. Не забываем о правах доступа к `/dev/sdb*`. Или даём при подключении права 666 на все разделы, или вступаем в группу `disk` (или как группа называется в вашем дистрибутиве Linux).

Начинаем установку Windows. Ждём пока установка дойдёт до первой перезагрузки. Выключаем нашу виртуальную машину, достаём HDD из контейнера и ставим в наш ПК. Включаем ПК и наблюдаем продолжение установки уже на реальной машине. Всё. Система установлена.
