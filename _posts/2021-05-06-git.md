---
layout: post
title: Git
date: 2021-05-06 02:12:45 +0700
tags: [Git]
---
Это небольшая шпаргалка по git.

# Конфигурация Git
Для настройки git используется команда git config. Конфигурация задаётся на 3 уровнях: уровне системы --system, уровне пользователя --global и непосредственно в репозитории. Например, указание ключа --global означает, что параметры будут сохранены в домашнем каталоге пользователя и будут использованы для всех его репозиториев (~/.gitconfig или ~/.config/git/config). По умолчанию используется ключ --local, при этом все настройки сохраняются в файле .git/config текущего репозитория. Конфигурация на каждом последующем уровне имеет более высокий приоритет, т.е. настройки внутри репозитория перекрывают настройки в домашнем каталоге пользователя, которые перекрывают системные настройки.
 
Изначально необходимо задать имя пользователя и адрес электронной почты, которые будут указаны в коммитах. Чтобы не указывать это каждый раз, следует добавить их глобально:
```bash
git config --global user.name "FSA"
git config --global user.email fsa@mail.com
```
В некоторых случаях в качестве дефолтного значения обычно предлагают ИМЯ_ПОЛЬЗОВАТЕЛЯ@ИМЯ_ХОСТА.

Просмотр конфигурации git, локальной и глобальной:
```bash
git config --list
git config --list --global
```
Подробнее о параметрах конфигурации:
```bash
git help config
```
Удалить значение параметров конфигурации или даже целые секции можно так:
```bash
git config unset user.name
git config --remove-section user
```
## Полезные опции
Текстовый редактор, который будет вызван при создании коммитов.
```bash
git config --global core.editor vim
```
Постраничный вывод результатов команд:
```bash
git config --global core.pager 'less -RFX'
```
Свои утилиты для просмотра изменений в файлах:
```bash
git config --global diff.tool kdiff3
git config --global merge.tool kdiff3
```
## Алиасы
Добавление алисасов для часто используемых команд:
```bash
git config --global alias.ci commit
git config --global alias.br branch
git config --global alias.co checkout
git config --global alias.st "status --short"
git config --global alias.hist "log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short"
```
# Работа с ветками
Просмотр имеющихся веток и всех веток, в том числе в удалённых репозиториях:
```bash
git branch
git branch -a
```
Переключиться на ветку
```bash
git checkout ВЕТКА
```
Если необходимо переключиться на другую ветку, но некоторые файлы были изменены, то можно спрятать все изменения, которые не попали в комиты (сохраняются только файлы, которые уже находятся в базе git):
```bash
git stash
```
Восстановить сохранённые изменения:
```bash
git stash pop
```
Изменения сохраняются в виде стека. Просмотр сохранённых снимков:
```bash
git stash list
```
Просмотр ещё не влитых изменений в ветку master:
```bash
git log --no-merges master..
```
# git push в несколько репоизиториев
Создаём новый удалённый репозиторий и добавляем URL для необходимых серверов. Не забываем добавить и наш сервер, в первую очередь:
```bash
git remote add all gitea@MYGITSERVER:USERNAME/PROJECT
git remote set-url --add --push all gitea@MYGITSERVER:USERNAME/PROJECT
git remote set-url --add --push all git@github.com:USERNAME/PROJECT.git
git remote set-url --add --push all git@gitlab.com:USERNAME/PROJECT.git
git remote set-url --add --push all git@bitbucket.org:USERNAME/PROJECT.git
```
Информация будет сохранена в текущем репозитории. Теперь можно с помощью команды git push all пушить изменения на несколько удалённых серверов. Вместо all можно использовать любое другое удобное имя.
