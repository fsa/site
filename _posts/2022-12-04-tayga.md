---
layout: post
title: TAYGA
date: 2022-12-04 23:22:00 +0700
tags: [TAYGA]
excerpt: Перевод описаний параметров файла конфигурации сервера трансляции NAT64 TAYGA.
---
Это перевод комментариев в файле конфигурации TAYGA - сервера трансляции NAT64.

## tun-device

Обязательный параметр.

Устройство TUN, которое TAYGA будет использовать для обмена пакетами IPv4 и IPv6 с ядром. Можно использовать любое имя, но рекомендуется `nat64`.

Это устройство можно создать перед запуском демона `tayga`, запустив `tayga --mktun`. Это позволяет настроить правила маршрутизации и брандмауэра до начала преобразования пакетов.

## ipv4-addr

Обязательный параметр.

IPv4-адрес TAYGA. Он **не является** IPv4-адресам вашего маршрутизатора! Для TAYGA требуется свой собственный адрес, потому что он действует как маршрутизатор IPv4 и IPv6 и должен иметь возможность отправлять сообщения ICMP. TAYGA также будет отвечать на эхо-запросы ICMP (ping) по этому адресу.

Этот адрес может находиться в пределах выделенного для TAYGA динамического пула адресов.

## ipv6-addr

Параметр не является обязательным, если указан префикс NAT64. Параметр, также, обязателен, если используется префикс NAT64 `64:ff9b::/96`, а `ipv4-addr` является частным (RFC1918) адресом.

IPv6-адрес TAYGA. Этот адрес **не является** IPv6-адрес вашего маршрутизатора! TAYGA требует свой собственный адрес, потому что он действует как маршрутизатор IPv4 и IPv6 и должен иметь возможность отправлять сообщения ICMP. TAYGA также будет отвечать на эхо-запросы ICMP (ping6) по этому адресу.

Если `ipv6-addr` не указан, то TAYGA создаст свой IPv6-адрес, используя `ipv4-addr` и префикс NAT64.

## prefix

Префикс NAT64. Адресное пространство IPv4 отображается в адресное пространство IPv6 путем добавления этого префикса к адресу IPv4. В большинстве случаев рекомендуется использовать префикс /96, но поддерживаются все длины, указанные в RFC 6052.

Это должен быть префикс, выбранный из адресного пространства IPv6 вашей сети, или префикс `64:ff9b::/96`. Обратите внимание, что использование префикса `64:ff9b::/96` запрещает узлам IPv6 связываться с узлами IPv4, имеющими частные (RFC1918) адреса, в соответствии с RFC 6052.

Префикс NAT64 не нужно указывать, если все необходимые сопоставления адресов перечислены в директивах `map'. (Смотри ниже.)

## dynamic-pool

Префикс динамического пула. Хостам IPv6, отправляющим трафик через TAYGA (и не соответствующим статической карте или IPv4-транслируемому адресу в префиксе NAT64), будет назначен IPv4-адрес из динамического пула. Динамические карты действительны в течение 124 минут после обнаружения последнего соответствующего пакета.

Если в динамическом пуле не осталось свободных адресов (или динамический пул не настроен), пакеты от неизвестных хостов IPv6 будут отклоняться с ошибкой ICMP unreachable.

## data-dir

Каталог постоянного хранения данных. В этом каталоге хранится файл dynamic.map, в котором сохраняются динамические карты, созданные из динамического пула. Можно не указывать, если вам не нужно, чтобы эти карты сохранялись между перезапусками TAYGA.

## map

Устанавливает карту связи с одним хостом. Если хост IPv6 должен быть постоянно доступен по определенному адресу IPv4, добавьте директиву map для данного хоста. Хосты IPv6, с адресом, преобразуемым в IPv4, не нуждаются в данной директиве.

IPv4-адреса, указанные в директиве `map', могут без конфликтов использовать адреса из указанного диапазона динамического пула.
