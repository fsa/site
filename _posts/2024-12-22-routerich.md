---
layout: post
title: Прошивка Routerich
date: 2024-12-25 00:25:50 +0700
tags: [Интернет]
excerpt: Особенности маршрутизатора Routerich AX3000 и его прошивки.
published: true
---
Столкнулся с маршрутизатором Routerich AX3000. Это относительно дешёвый маршрутизатор, который поддерживает стандарт WiFi 6 (IEEE 802.11ax), а также официальную поддержку прошивки OpenWRT. Изначально маршрутизатор поставляется с брендированной модифицированной прошивкой OpenWRT от производителя. Эта прошивка устроит большую часть пользователей. Однако я уже ранее использовал OpenWRT и хотелось максимально быстро перенести все старые настройки, интерфейс ванильной OpenWRT для меня более привычный, поэтому я сразу после получения маршрутизатора занялся его прошивкой.

В дальнейшем я буду использовать следующую терминологию:

- официальная прошивка Routerich — оригинальная прошивка маршрутизатора с которой он поставляется, основана на OpenWRT, но содержит множество фирменных патчей;
- официальная прошивка OpenWRT — прошивка OpenWRT, которую предоставляет производитель, не содержит патчей из официальной прошивки Routerich;
- ванильная прошивка OpenWRT — прошивка с сайта <https://openwrt.org>.

Первая попытка прошить ванильную OpenWRT у меня завершился неудачей. После прошивки маршрутизатор не смог запуститься. К счастью у маршрутизатора есть режим аварийного восстановления прошивки. Для его использования достаточно настроить IP адрес на сетевой карте `192.168.1.2` (на маршрутизаторе в этом режиме не включается DHCP и необходимо указывать адрес вручную из диапазона `192.168.1.0/24`), стандартную для этого диапазона маску `255.255.255.0`. Также производителем рекомендуется указать шлюз `192.168.1.1` (адрес маршрутизатора), но это не имеет какого-то смысла во время восстановления прошивки. Маршрутизатор должен быть подключен к компьютеру через LAN. Все остальные устройства лучше отключить от маршрутизатора, чтобы они не влияли на процесс восстановления. Далее необходимо зажать клавишу RESET и включите питание маршрутизатора. После того, как индикатор WAN загорится непрерывно, можно отпустить кнопку и перейти к прошивке.

Для восстановления прошивки переходим по адресу <http://192.168.1.1/>. Через него же можно обновить загрузчик uboot, но будьте с этим аккуратнее, потому что при неверной прошивке загрузчика для восстановления маршрутизатора необходимо будет вскрывать маршрутизатор и подключаться к порту uart. Поэтому перед прошивкой uboot обязательно найдите и сверьте контрольную сумму!

На момент написания заметки [самая свежая версия загрузчика](https://t.me/routerich/7761/15571). Она поддерживает разметки 112МБ и 64МБ. Именно в разных разметках и заключалась моя проблема. При установке прошивки с сайта OpenWRT необходимы выбирать разметку 64МБ. В следующей версии OpenWRT 24.10 обещают, что прошивка будет поддерживать разметку 112МБ. Учитывайте это перед обновлением маршрутизатора в будущем. Если вы читаете этот текст значительно позже 2024 года, то обязательно проверьте в официальном телеграм канале Routerich наличие свежих версий и ознакомьтесь с текущим положением дел.

На момент написания заметки [текущая версия форка прошивки routerich](https://t.me/routerich/7761/47800). При обновлении прошивается через интерфейс Routerich. При восстановлении пришивки использует режим по умолчанию - 112 МБ.

Кроме этого производитель предоставляет прошивку, которую называет [официальной OpenWRT 23.05.5 под разметку 112 МБ](https://t.me/routerich/7761/18526). Прошивать её нужно также в режиме 112 МБ. Но в коем случае не используйте для её обновления официальный сервер <https://sysupgrade.openwrt.org>, потому что вы можете окирпичить маршрутизатор (вероятно с выходом версии 24.10 это изменится). При использовании аналогичного сервера от производителя таких проблем возникнуть не должно: <https://firmware.routerich.ru/>.

## IPv6

О оригинальной прошивке протокол IPv6 отключен по умолчанию. Связано это с тем, что в РФ сеть интернет нормально не работает и маршрутизатор может исправить эту ситуацию. Но многие скрипы, которые позволяют это сделать не учитывают IPv6 и некорректно работают с этим протоколом. Чтобы неопытные пользователи не испытывали неудобств, производитель предусмотрел отключение протокола в своей прошивке. Для этого был создан сервис «disable_ipv6», который необходимо отключить для тех, кому нужен IPv6. При этом скрипты, которые восстанавливают нормальную работу сети интернет могут не работать или работать некорректно.

## Заключение

Routerich AX3000 довольно неплохой маршрутизатор построенный на платформе с открытым исходным кодом OpenWRT. Это позволяет ему иметь достаточно низку цену, высокую производительность, добротную радиочастотную часть и при этом не ограничивать пользователя в настройках. Фатально убить его можно только при прошивке uboot. Для остальных случаев есть режим восстановления. При этом маршрутизатор даже из коробки имеет всё необходимое для большинства пользователей.

## Полезные ссылки

[Официальный сайт производителя](https://routerich.ru/)

[Официальный Telegram канал производителя](https://t.me/routerich)

[Инструкция по аварийной прошивке через web-интерфейс загрузчика и смене uboot (если требуется)](https://t.me/routerich/7761/15570)

[Страница маршрутизатора на сайте 4PDA](https://4pda.to/forum/index.php?showtopic=1080524)
